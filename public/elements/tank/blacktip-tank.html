<link rel="import" href="/bower_components/paper-styles/shadow.html">
<link rel="import" href="/bower_components/paper-styles/typography.html">
<link rel="import" href="/bower_components/paper-icon-buttons/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-badge/paper-badge.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">


<dom-module id="blacktip-tank">
  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
        background-color: #fafafa;
        color: #212121;
        padding: 1em;
        @apply(--paper-font-common-base);
        @apply(--shadow-elevation-2dp);
        border-radius: 2px;
      }

      .hidden {
        display: none;
      }

      h1 {
        font-size: 1.15em;
        margin: 0;
        white-space: pre-wrap;
      }

      h1:not(.hidden)+p {
        margin-top: 1em;
      }

      p {
        margin: 0;
        font-family: 'Roboto Slab', Times New Roman, serif;
        font-size: 0.9em;
        white-space: pre-wrap;
      }

      .placeholder:after {
        content: 'Tap to edit this field';
        opacity: 0.5;
      }

      .hidden {
        display: none;
      }

      .empty {
        font-style: italic;
        color: #737373;
        line-height: 0;
        pointer-events: none;
      }

      .container {
        display: inline-block;
        margin-left: 30px;
        margin-right: 30px;
      }

      .container > paper-badge {
       --paper-badge-margin-left: -15px;
       --paper-badge-width: 30px;
       --paper-badge-margin-bottom: -10px;
       --paper-badge-background: var(--paper-indigo-500);

      }
    </style>
    <!--<div class="tank-key" hidden></div>
    <div class="card-last-updated" hidden></div>
    <div class="temperature">
            <span class="value"></span><span class="scale">Â°F</span>
    </div>-->
    <h1
        id="title"
        class$="[[emptyClass(title, editable)]]"
        contenteditable$="[[editable]]"></h1>
    <span
        id="body"
        class$="[[emptyClass(body, editable)]]"
        contenteditable$="[[editable]]"></span><br>

    
    <span>Target Temp = </span><span id="temperature"
        class$="[[emptyClass(temperature, editable)]]"
        contenteditable$="[[editable]]"></span><br><br><br>
    <div class="container">
    <paper-icon-button id="temp" src="/images/tempDrk.png" alt="temperature">
        </paper-icon-button>
          <paper-badge for="temp" label$="[[temperature]]">
        </paper-badge>

    <paper-icon-button id="ph" src="/images/phDrk.png" alt="pH">
        </paper-icon-button>
          <paper-badge for="ph" label="7.6">
          </paper-badge>

    <paper-icon-button id="salinity" src="/images/salDrk.png" alt="Salinity">
        </paper-icon-button>
          <paper-badge for="salinity" label="1.023">
          </paper-badge>

    </div>

    </div>
    <!--<p>Target Temperature = </p>
    <p
        id="temperature"
        class$="[[emptyClass(temperature, editable)]]"
        contenteditable$="[[editable]]"></p>-->

  </template>
  <script>
    Polymer({
      is: 'blacktip-tank',

      properties: {
        editable: {
          type: Boolean,
          reflectToAttribute: true,
          value: false
        },

        title: {
          type: String,
          notify: true,
          value: ''
        },

        body: {
          type: String,
          notify: true,
          value: ''
        },

        temperature: {
          type: String,
          notify: true,
          value: ''
        },

        lastUpdated: {
          type: Number,
          value: 0
        }
      },

      listeners: {
        input: 'onInput'
      },

      observers: [
        'updateTextContent(title, body, temperature)'
      ],

      emptyClass(content, editable) {
        if (editable) {
          return !content ? 'placeholder' : '';
        } else {
          return !content ? 'hidden' : '';
        }
      },

      propertiesAreEmpty() {
        for (var i = 0; i < arguments.length; ++i) {
          if (arguments[i]) {
            return false;
          }
        }
        return true;
      },

      updateTextContent(title, body, temperature) {
        console.log(arguments);
        this.$.title.textContent = title;
        this.$.body.textContent = body;
        this.$.temperature.textContent = temperature;
      },

      onInput() {
        this.async(function() {
          this.title = this.$.title.innerText;
          this.body = this.$.body.innerText;
          this.temperature = this.$.temperature.innerText;
        });
      }
    })
  </script>
</dom-module>
